package DAO.IMPL;

import java.util.List;

import org.hibernate.Session;

import DAO.IBookDao;
import MODEL.Book;

public class BookDao implements IBookDao{

	@Override
	public List<Book> findAllBooks() {
		Session session = sessionFactory.openSession();
		return session.createQuery("from Book").list();
	}

	@Override
	public void insertBook(Book book) {
		Session session = sessionFactory.openSession();
		try {
			// bắt đầu 1 giao dịch
			session.beginTransaction();
			// thực thi câu query dạng hql
			session.save(book);
			// kết thúc 1 giao dịch
			session.getTransaction().commit();
			System.out.println("insert book success !");
		} catch (RuntimeException e) {
			// nếu có lỗi thì trở về trạng thái lúc chưa bắt đầu giao dịch.
			session.getTransaction().rollback();
			e.printStackTrace();
		} finally {
			session.flush();
			session.close();
		}
		
	}

	@Override
	public void deleteBookByID(int id) {
		// TODO Auto-generated method stub
		
	}

	@Override
	public void updateBook(int id, String name, String description, double price, String image, int cat_id) {
		// TODO Auto-generated method stub
		
	}

}
